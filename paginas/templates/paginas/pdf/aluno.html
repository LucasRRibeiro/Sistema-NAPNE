{% extends "paginas/modelo2.html" %}
{% load static %}

{% block titulo %}
<title>Dados do Aluno - NAPNE IFPR</title>
{% endblock %}

{% block conteudo %}
<div class="pdf-page">
    <div class="pdf-content">
        <h3 class="text-center">Plano de Trabalho - Aluno</h3>
        
        <hr class="my-4">

        <!-- 1. Identifica칞칚o do Estudante -->
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
            <tr style="background-color: #d9ead3; font-weight: bold;">
                <td colspan="2" style="border: 1px solid #000; padding: 5px;">1. IDENTIFICA칂츾O DO ESTUDANTE</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px; width: 50%;">RA</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.ra }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Nome</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.nome }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Cpf</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.cpf }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Rg</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.rg }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Data de Nascimento</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.data_nasc|date:"d/m/Y" }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Email</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.email }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Fone</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.fone }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Cidade</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.cidade }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Endere칞o</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.endereco }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Respons치vel</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.responsavel.nome }}</td>
            </tr>
            <tr>
                <td style="border: 1px solid #000; padding: 5px;">Curso</td>
                <td style="border: 1px solid #000; padding: 5px;">{{ aluno.curso.nome }} - {{ aluno.curso.serie }}췈</td>
            </tr>
        </table>
    </div>

    <!-- Data e assinatura no final -->
    <div class="pdf-footer">
        <p>Paranava칤, ____/____/____</p>
        <div style="text-align: center; margin-top: 50px;">
            <div style="border-top: 1px solid black; width: 200px; margin: 0 auto;"></div>
            <p style="font-style: italic; margin-top: 5px;">Assinatura</p>
        </div>
    </div>

    <div class="no-print">
        <a href="{% url 'listar-aluno' %}" class="btn btn-outline-secondary mt-3">&larr; Voltar</a>
        <button onclick="window.print()" class="btn btn-primary mt-3">
            游늯 Gerar PDF
        </button>
    </div>
</div>

<style>
    /* Layout flex칤vel para tela */
    .pdf-page {
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        padding: 20px;
        margin: 0 auto;
        max-width: 800px;
        position: relative;
    }

    .pdf-content {
        flex-grow: 1;
        margin-bottom: 120px; /* Espa칞o para o footer */
    }

    .pdf-footer {
        margin-top: auto;
    }

    /* Estilos espec칤ficos para impress칚o */
    @media print {
        .no-print {
            display: none !important;
        }

        .pdf-page {
            max-width: none;
            margin: 0;
            padding: 30px 20px 120px 20px; /* padding-bottom maior para espa칞o do footer */
            height: auto;
            min-height: calc(100vh - 150px);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .pdf-content {
            flex-grow: 1;
            margin-bottom: 0;
        }

        .pdf-footer {
            position: absolute;
            bottom: 30px;
            left: 20px;
            right: 20px;
            margin-top: auto;
        }

        /* Evitar quebras de p치gina desnecess치rias */
        table {
            page-break-inside: avoid;
        }
        
        h3 {
            page-break-after: avoid;
        }

        body {
            margin: 0;
            padding: 0;
        }

        /* Configura칞칚o da p치gina */
        @page {
            margin: 0;
            size: A4;
        }
    }
</style>
{% endblock %}